## 4. 엔티티 매핑
#### 객체와 테이블 매핑
- @Entitiy : JPA가 관리하는 객체임을 나타냄
  - name : JPA 내부적으로 설정하는 이름. name 테이블과 매핑됨.
- @Table

#### 데이터베이스 스키마 자동 생성
- DDL(Data Definition Language, 자료 정의 언어)
-애플리케이션 실행시 생성됨
- 코드를 왔다갔다하면서 안 써도 됨
- varchar : 방언에 따라 알아서 달라짐
- 운영 장비에 절대 create, create-drop, update 사용하면  안 됨
  - 여러 명이 함께 사용하는 테스트 서버에 create 쓰면 데이터 날라감.
  - 테스트 서버, 운영 서버 웬만하면 쓰지마
- DDL 생성 기능
  - DDL 생성에만 사용되고 JPA 실행 로직에 영향 안 줌

#### 필드와 컬럼 매핑
- 자바와 달리 날짜, 시간, 날짜&시간
- @column
- @enumrated
  - 예전 데이터 변경 안 돼서 ORDINAL 사용하지 않는 게 좋음
- @Temporal
  - 요즘 잘 안 씀
- @Lob
  - 매핑하는 필드가 문자면 CLOB, 나머지는 BLOB
- @Transient
  - 임시로 값 보관

#### 기본 키 매핑
- 직접 할당 @Id : null로 나옴
- 자동 생성 @GeneratedValue
  - IDENTITY
  - SEQUENCE
  - TABLE
  - AUTO

## 5. 연관관계 매핑 기초
#### 연관관계가 필요한 이유
- 객체를 테이블에 맞추어 모델링

#### 단방향 연관관계
- 객체 지향 모델링

#### 양방향 연관관계와 연관관계의 주인
- 양방향 매핑
- 연관관계의 주인과 mappedBy
- 객체와 테이블이 관계를 맺는 차이
  - 객체 연관관계는 2개, 테이블 연관관계는 1개
- 객체의 양방향 관계 : 서로 다른 단방향 관계 2개
- 테이블의 양방향 연관관계 : 외래 키 1개로 두 테이블의 연관관계 관리
- 양방향 매핑
  - 연관관계의 주인이 외래 키 관리
  - 주인이 아니면 읽기만 가능
  - 외래 키가 있는 쪽이 주인


## 6. 다양한 연관관계 매핑
#### 다양한 연관관계 매핑
- 연관관계 매핑시 고려사항
  - 다중성
  - 단방향, 양방향
  - 연관관계의 주인

#### 다대일 [N:1]
- 다대일 단방향
- 다대일 양방향
  - 양쪽을 서로 참조

#### 일대다[1:N]
- 일대다 단방향
  - 1이 연관관계의 주인
  - N쪽에 외래 키
- 일대다 양방향
  - 읽기 전용 필드로 양방향처럼 사용

#### 일대일 관계
- 주 테이블이나 대상 케이블 중에 외래 키 선택 가능
- 일대일, 주 테이블에 외래 키 단방향 : 다대일 단방향과 유사
- 일대일, 주 테이블에 외래 키 양방향 : 외래 키 있는 곳이 주인
- 일대일, 대상 테이블에 외래 키 단방향 : JPA 지원 안 함
- 일대일, 대상 테이블에 외래 키 양방향
다대다 [N:M]
- 테이블 2개로는 표현 안 되고 연결 테이블을 추가해서 일대다, 다대일로 구현
- 객체는 컬렉션으로 2개만으로 구현 가능
- 연결 테이블용 엔티티 추가로 한계 극복
- 테이블 N:M 관계는 중간 테이블을 이용해서 1:N, N:1로


## 7. 고급매핑
#### 상속관계 매핑
- 슈퍼타입 서브타입 논리 모델을 실제 물리 모델로 구현
- 조인 전략 (JOINED)
- 단일 테이블 전략 (SINGLE_TABLE)
- 구현 클래스마다 테이블 전략(TABLE_PER_CLASS)

#### @MappedSuperclass
- 공통 매핑 정보가 필요할 때 사용
- 자식 클래스에 매핑 정보만 제공
- 조회, 검색 불가
- 테이블과 관계 없고, 단순히 엔티티가 공통으로 사용하는 매핑 정보 모으는 역할
